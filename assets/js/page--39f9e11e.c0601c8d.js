(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{909:function(s,n,e){"use strict";e.r(n);var a=e(1),t=Object(a.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p",[s._v("webpack的执行")]),s._v(" "),e("h2",{attrs:{id:"一、-webapck的本质"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、-webapck的本质"}},[s._v("#")]),s._v(" 一、 webapck的本质")]),s._v(" "),e("ul",[e("li",[s._v("本质上就是打包工具,不是框架也不是库")]),s._v(" "),e("li",[s._v("实质上是一个nodejs运行程序")]),s._v(" "),e("li",[s._v("webpack 是一个现代 JavaScript 应用程序的静态模块打包器。当 webpack 处理应用程序时，它会递归地构建一个依赖关系图，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 bundle。")])]),s._v(" "),e("h2",{attrs:{id:"二、手写webpack"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、手写webpack"}},[s._v("#")]),s._v(" 二、手写webpack")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("初始化项目")]),s._v(" "),e("p",[e("code",[s._v("yarn init -y")])])]),s._v(" "),e("li",[e("p",[s._v("安装webpack和webpack-cli")]),s._v(" "),e("p",[e("code",[s._v("yarn add webpack webpack-cli -D")])])]),s._v(" "),e("li",[e("p",[s._v("编写webpack.config.js")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("const path = require('path')\n\nconst RunPlugins = require('./plugins/run-plugins')\nconst DonePlugins = require('./plugins/done-plugins')\n\nmodule.exports = {\n  entry: './src/index.js',\n  output: {\n    path: path.resolve(__dirname, './dist'),\n    filename: 'main.js'\n  },\n  module:{\n    rules:[\n        {\n            test:/\\.js/,\n            use:[\n                path.resolve(__dirname,'loaders','loader1.js'),\n                path.resolve(__dirname,'loaders','loader2.js')\n            ]\n        }\n    ]\n},\nplugins:[\n    new RunPlugins(),\n    new DonePlugins()\n]\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("nodejs入口")]),s._v(" "),e("p",[s._v("app.js")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("const webpack = require('./webpack')\nconst config = require('./webpack.config')\n\n\nconst compiler = webpack(config)\n\ncompiler.run()\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("webpack.js(自己定义的)")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("const Compiler = require('./compiler')\n\nfunction webpack(config){\n\n    const shellOptions = process.argv.slice(2).reduce((config,arg)=>{\n        let [key,value] = arg.split('=')\n        config[key.slice(2)] = value\n        return config\n    },{})\n    const finallOptions =  {...config,...shellOptions}\n    const compiler = new Compiler(finallOptions)\n\n    // 创建完comppiler后  挂载插件\n\n    finallOptions.plugins.forEach(plugin => {\n        plugin.apply(compiler)\n    });\n\n\n    return compiler\n} \n\nmodule.exports = webpack\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("compiler.js")]),s._v(" "),e("p",[s._v("编译的核心   webpack的功能实现")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("const fs = require('fs')\nconst path = require('path')\nconst options = require('./webpack.config')\nconst parser = require('@babel/parser')\nconst traverse = require('@babel/traverse').default\nconst {\n  transformFromAst\n} = require('@babel/core')\nconst {\n  SyncHook\n} = require('tapable')\nconst Parser = {\n  getAst: path => {\n    // 读取入口文件\n    const content = fs.readFileSync(path, 'utf-8')\n    // 将文件内容转为AST抽象语法树\n    return parser.parse(content, {\n      sourceType: 'module'\n    })\n  },\n  getDependecies: (ast, filename) => {\n    const dependecies = {}\n    // 遍历所有的 import 模块,存入dependecies\n    traverse(ast, {\n      // 类型为 ImportDeclaration 的 AST 节点 (即为import 语句)\n      ImportDeclaration({\n        node\n      }) {\n        const dirname = path.dirname(filename)\n        // 保存依赖模块路径,之后生成依赖关系图需要用到\n        const filepath = './' + path.join(dirname, node.source.value)\n        dependecies[node.source.value] = filepath\n      }\n    })\n    return dependecies\n  },\n  getCode: ast => {\n    // AST转换为code\n    const {\n      code\n    } = transformFromAst(ast, null, {\n      presets: ['@babel/preset-env']\n    })\n    return code\n  }\n}\n\nclass Compiler {\n  constructor(options) {\n    this.options = options\n    // webpack 配置\n    const {\n      entry,\n      output\n    } = options\n    // 入口\n    this.entry = entry\n    // 出口\n    this.output = output\n    // 模块\n    this.modules = []\n    this.hooks = {\n      run: new SyncHook(),\n      done: new SyncHook(),\n      emit: new SyncHook()\n    }\n  }\n  // 构建启动\n  run() {\n    // 解析入口文件\n    this.hooks.run.call()\n\n    this.build(this.entry)\n\n    this.hooks.done.call()\n\n    // 生成依赖关系图\n    const dependencyGraph = this.modules.reduce(\n      (graph, item) => ({\n        ...graph,\n        // 使用文件路径作为每个模块的唯一标识符,保存对应模块的依赖对象和文件内容\n        [item.filename]: {\n          dependecies: item.dependecies,\n          code: item.code\n        }\n      }), {}\n    )\n    this.generate(dependencyGraph)\n  }\n  build(filename) {\n    \n    const {\n      getAst,\n      getDependecies,\n      getCode\n    } = Parser\n    const ast = getAst(filename)\n    const dependecies = getDependecies(ast, filename)\n    let code = getCode(ast)\n\n    // 加载loader\n    let loaders = []\n\n    const rules = this.options.module.rules\n\n    for (let i = 0; i < rules.length; i++) {\n      if (rules[i].test.test(filename)) {\n        loaders = [...loaders, ...rules[i].use]\n      }\n    }\n    for (let i = loaders.length - 1; i >= 0; i--) {\n      code = require(loaders[i])(code)\n    }\n    const obj = {\n      // 文件路径,可以作为每个模块的唯一标识符\n      filename,\n      // 依赖对象,保存着依赖模块路径\n      dependecies,\n      // 文件内容\n      code\n    }\n    this.modules.push(obj)\n    for (let key in dependecies) {\n      if (dependecies[key]) {\n        this.build(dependecies[key])\n      }\n    }\n  }\n  // 重写 require函数 (浏览器不能识别commonjs语法),输出bundle\n  generate(code) {\n    // 输出文件路径\n    const filePath = path.join(this.output.path, this.output.filename)\n    const bundle = `(function(graph){\n      function require(module){\n        function localRequire(relativePath){\n          return require(graph[module].dependecies[relativePath])\n        }\n        var exports = {};\n        (function(require,exports,code){\n          eval(code)\n        })(localRequire,exports,graph[module].code);\n        return exports;\n      }\n      require('${this.entry}')\n    })(${JSON.stringify(code)})`\n\n\n    // 把文件内容写入到文件系统\n    fs.writeFileSync(filePath, bundle, 'utf-8')\n  }\n}\n\n\nmodule.exports = Compiler\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br"),e("span",{staticClass:"line-number"},[s._v("47")]),e("br"),e("span",{staticClass:"line-number"},[s._v("48")]),e("br"),e("span",{staticClass:"line-number"},[s._v("49")]),e("br"),e("span",{staticClass:"line-number"},[s._v("50")]),e("br"),e("span",{staticClass:"line-number"},[s._v("51")]),e("br"),e("span",{staticClass:"line-number"},[s._v("52")]),e("br"),e("span",{staticClass:"line-number"},[s._v("53")]),e("br"),e("span",{staticClass:"line-number"},[s._v("54")]),e("br"),e("span",{staticClass:"line-number"},[s._v("55")]),e("br"),e("span",{staticClass:"line-number"},[s._v("56")]),e("br"),e("span",{staticClass:"line-number"},[s._v("57")]),e("br"),e("span",{staticClass:"line-number"},[s._v("58")]),e("br"),e("span",{staticClass:"line-number"},[s._v("59")]),e("br"),e("span",{staticClass:"line-number"},[s._v("60")]),e("br"),e("span",{staticClass:"line-number"},[s._v("61")]),e("br"),e("span",{staticClass:"line-number"},[s._v("62")]),e("br"),e("span",{staticClass:"line-number"},[s._v("63")]),e("br"),e("span",{staticClass:"line-number"},[s._v("64")]),e("br"),e("span",{staticClass:"line-number"},[s._v("65")]),e("br"),e("span",{staticClass:"line-number"},[s._v("66")]),e("br"),e("span",{staticClass:"line-number"},[s._v("67")]),e("br"),e("span",{staticClass:"line-number"},[s._v("68")]),e("br"),e("span",{staticClass:"line-number"},[s._v("69")]),e("br"),e("span",{staticClass:"line-number"},[s._v("70")]),e("br"),e("span",{staticClass:"line-number"},[s._v("71")]),e("br"),e("span",{staticClass:"line-number"},[s._v("72")]),e("br"),e("span",{staticClass:"line-number"},[s._v("73")]),e("br"),e("span",{staticClass:"line-number"},[s._v("74")]),e("br"),e("span",{staticClass:"line-number"},[s._v("75")]),e("br"),e("span",{staticClass:"line-number"},[s._v("76")]),e("br"),e("span",{staticClass:"line-number"},[s._v("77")]),e("br"),e("span",{staticClass:"line-number"},[s._v("78")]),e("br"),e("span",{staticClass:"line-number"},[s._v("79")]),e("br"),e("span",{staticClass:"line-number"},[s._v("80")]),e("br"),e("span",{staticClass:"line-number"},[s._v("81")]),e("br"),e("span",{staticClass:"line-number"},[s._v("82")]),e("br"),e("span",{staticClass:"line-number"},[s._v("83")]),e("br"),e("span",{staticClass:"line-number"},[s._v("84")]),e("br"),e("span",{staticClass:"line-number"},[s._v("85")]),e("br"),e("span",{staticClass:"line-number"},[s._v("86")]),e("br"),e("span",{staticClass:"line-number"},[s._v("87")]),e("br"),e("span",{staticClass:"line-number"},[s._v("88")]),e("br"),e("span",{staticClass:"line-number"},[s._v("89")]),e("br"),e("span",{staticClass:"line-number"},[s._v("90")]),e("br"),e("span",{staticClass:"line-number"},[s._v("91")]),e("br"),e("span",{staticClass:"line-number"},[s._v("92")]),e("br"),e("span",{staticClass:"line-number"},[s._v("93")]),e("br"),e("span",{staticClass:"line-number"},[s._v("94")]),e("br"),e("span",{staticClass:"line-number"},[s._v("95")]),e("br"),e("span",{staticClass:"line-number"},[s._v("96")]),e("br"),e("span",{staticClass:"line-number"},[s._v("97")]),e("br"),e("span",{staticClass:"line-number"},[s._v("98")]),e("br"),e("span",{staticClass:"line-number"},[s._v("99")]),e("br"),e("span",{staticClass:"line-number"},[s._v("100")]),e("br"),e("span",{staticClass:"line-number"},[s._v("101")]),e("br"),e("span",{staticClass:"line-number"},[s._v("102")]),e("br"),e("span",{staticClass:"line-number"},[s._v("103")]),e("br"),e("span",{staticClass:"line-number"},[s._v("104")]),e("br"),e("span",{staticClass:"line-number"},[s._v("105")]),e("br"),e("span",{staticClass:"line-number"},[s._v("106")]),e("br"),e("span",{staticClass:"line-number"},[s._v("107")]),e("br"),e("span",{staticClass:"line-number"},[s._v("108")]),e("br"),e("span",{staticClass:"line-number"},[s._v("109")]),e("br"),e("span",{staticClass:"line-number"},[s._v("110")]),e("br"),e("span",{staticClass:"line-number"},[s._v("111")]),e("br"),e("span",{staticClass:"line-number"},[s._v("112")]),e("br"),e("span",{staticClass:"line-number"},[s._v("113")]),e("br"),e("span",{staticClass:"line-number"},[s._v("114")]),e("br"),e("span",{staticClass:"line-number"},[s._v("115")]),e("br"),e("span",{staticClass:"line-number"},[s._v("116")]),e("br"),e("span",{staticClass:"line-number"},[s._v("117")]),e("br"),e("span",{staticClass:"line-number"},[s._v("118")]),e("br"),e("span",{staticClass:"line-number"},[s._v("119")]),e("br"),e("span",{staticClass:"line-number"},[s._v("120")]),e("br"),e("span",{staticClass:"line-number"},[s._v("121")]),e("br"),e("span",{staticClass:"line-number"},[s._v("122")]),e("br"),e("span",{staticClass:"line-number"},[s._v("123")]),e("br"),e("span",{staticClass:"line-number"},[s._v("124")]),e("br"),e("span",{staticClass:"line-number"},[s._v("125")]),e("br"),e("span",{staticClass:"line-number"},[s._v("126")]),e("br"),e("span",{staticClass:"line-number"},[s._v("127")]),e("br"),e("span",{staticClass:"line-number"},[s._v("128")]),e("br"),e("span",{staticClass:"line-number"},[s._v("129")]),e("br"),e("span",{staticClass:"line-number"},[s._v("130")]),e("br"),e("span",{staticClass:"line-number"},[s._v("131")]),e("br"),e("span",{staticClass:"line-number"},[s._v("132")]),e("br"),e("span",{staticClass:"line-number"},[s._v("133")]),e("br"),e("span",{staticClass:"line-number"},[s._v("134")]),e("br"),e("span",{staticClass:"line-number"},[s._v("135")]),e("br"),e("span",{staticClass:"line-number"},[s._v("136")]),e("br"),e("span",{staticClass:"line-number"},[s._v("137")]),e("br"),e("span",{staticClass:"line-number"},[s._v("138")]),e("br"),e("span",{staticClass:"line-number"},[s._v("139")]),e("br"),e("span",{staticClass:"line-number"},[s._v("140")]),e("br"),e("span",{staticClass:"line-number"},[s._v("141")]),e("br"),e("span",{staticClass:"line-number"},[s._v("142")]),e("br"),e("span",{staticClass:"line-number"},[s._v("143")]),e("br"),e("span",{staticClass:"line-number"},[s._v("144")]),e("br"),e("span",{staticClass:"line-number"},[s._v("145")]),e("br"),e("span",{staticClass:"line-number"},[s._v("146")]),e("br"),e("span",{staticClass:"line-number"},[s._v("147")]),e("br"),e("span",{staticClass:"line-number"},[s._v("148")]),e("br"),e("span",{staticClass:"line-number"},[s._v("149")]),e("br"),e("span",{staticClass:"line-number"},[s._v("150")]),e("br"),e("span",{staticClass:"line-number"},[s._v("151")]),e("br"),e("span",{staticClass:"line-number"},[s._v("152")]),e("br"),e("span",{staticClass:"line-number"},[s._v("153")]),e("br"),e("span",{staticClass:"line-number"},[s._v("154")]),e("br")])])])]),s._v(" "),e("h2",{attrs:{id:"三、loader"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三、loader"}},[s._v("#")]),s._v(" 三、loader")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("loader的本质")])]),s._v(" "),e("li",[e("p",[s._v("他就是一个函数,参数为转换过的js代码，然后在这个函数里面做处理，然后返回更改后的代码。")])]),s._v(" "),e("li",[e("p",[s._v("后续会更新一篇手写loader的文章")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code")]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"})])])]),s._v(" "),e("p",[s._v("function loader(source){\nconsole.log('loader1 执行了')\nreturn source\n}")]),s._v(" "),e("p",[s._v("module.exports = loader\n```")]),s._v(" "),e("h2",{attrs:{id:"四、plugin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四、plugin"}},[s._v("#")]),s._v(" 四、plugin")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("插件的本质")]),s._v(" "),e("p",[s._v("plugin的本质是一个类，类里面有一个apply方法，apply的参数为compiler，在其上面会有一些hooks，不同的hooks对应不同的tapable实例。")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("class DonePlugin{\n    apply(compiler){\n        compiler.hooks.done.tap('DonePlugin',()=>{\n            console.log('done-plugin钩子触发了')\n        })\n    }\n}\n\n\nmodule.exports = DonePlugin\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);